# 16â€‘docker-compose.hlx
stack {
    version = "3.9"
}
services = {
    db = {
        image = "postgres:16"
        environment = { POSTGRES_PASSWORD = $POSTGRES_PASSWORD }
        ports = ["5432:5432"]
    }
    api = {
        build = "."
        depends_on = ["db"]
        ports = ["8080:8080"]
        env = { DATABASE_URL = "postgres://postgres:$POSTGRES_PASSWORD@db:5432/postgres" }
    }
    redis = {
        image = "redis:7"
        ports = ["6379:6379"]
    }
}